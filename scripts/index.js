var v=document.querySelector(".header__button"),T=document.querySelector(".header__main-menu"),y=()=>{v.addEventListener("click",()=>{T.classList.toggle("header__main-menu--hidden"),v.classList.toggle("header__button--open")})};var _=document.querySelector(".slider__button--previous"),d=document.querySelector(".slider__button--next"),q=document.querySelector(".slider-pagination"),r=document.querySelectorAll(".slider__item"),l=document.querySelectorAll(".slider-pagination__button"),o=0;r.length<2&&(d.disabled=!0);var k=()=>{o<=0?(_.disabled=!0,d.disabled=!1):o>=r.length-1?(d.disabled=!0,_.disabled=!1):(d.disabled=!1,_.disabled=!1),r.forEach(e=>{e.classList.remove("slider__item--top")}),r[o].classList.add("slider__item--top"),l.forEach(e=>{e.classList.remove("slider-pagination__button--current")}),l[o].classList.add("slider-pagination__button--current")},E=()=>{_.addEventListener("click",()=>{o--,k()})},B=()=>{d.addEventListener("click",()=>{o++,k()})};if(l.length<r.length)for(let e=l.length;e<r.length;e++){let t=document.querySelector(".slider-pagination__item").cloneNode(!0),i=t.querySelector("button");i.classList.remove("slider-pagination__button--current");let u=i.querySelector("span");u.textContent=e+1,q.append(t)}l=document.querySelectorAll(".slider-pagination__button");l.forEach((e,t)=>{e.dataset.id=t});var C=()=>{r.length>=2&&q.addEventListener("click",e=>{e.target.type==="button"&&(o=+e.target.dataset.id,k())})};var s=document.querySelector(".price__slider"),h=document.querySelector(".price__input--min"),f=document.querySelector(".price__input--max"),O=document.querySelector(".filter__button--reset"),G=10,n={minHandIndex:0,maxHandIndex:1,minHandStart:0,maxHandStart:900,minSliderValue:0,maxSliderValue:1e3,sliderValueStep:1};noUiSlider.cssClasses.target+=" price__slider-target";noUiSlider.cssClasses.connect+=" price__slider-connect";noUiSlider.cssClasses.handle+=" price__slider-handle";noUiSlider.create(s,{start:[n.minHandStart,n.maxHandStart],step:n.sliderValueStep,connect:!0,range:{min:n.minSliderValue,max:n.maxSliderValue},format:{to:function(e){return parseInt(e,G)},from:function(e){return parseFloat(e)}}});var P=()=>{s.noUiSlider.on("update",()=>{h.value=s.noUiSlider.get()[n.minHandIndex],f.value=s.noUiSlider.get()[n.maxHandIndex]})},V=e=>{s.noUiSlider.set([e,null])},M=e=>{s.noUiSlider.set([null,e])},I=()=>{h.addEventListener("change",()=>{V(h.value)})},H=()=>{f.addEventListener("change",()=>{M(f.value)})},U=()=>{O.addEventListener("click",()=>{V(n.minHandStart),M(n.maxHandStart)})};var p=document.querySelector(".pagination__link--previous"),S=document.querySelector(".pagination__link--next"),g=document.querySelectorAll("a.pagination__number"),j=document.querySelector(".pagination"),c=1,b=()=>{c<=0?(p.classList.add("pagination__link--hidden"),S.classList.remove("pagination__link--hidden")):c>=g.length-1?(S.classList.add("pagination__link--hidden"),p.classList.remove("pagination__link--hidden")):(S.classList.remove("pagination__link--hidden"),p.classList.remove("pagination__link--hidden")),g.forEach(e=>{e.classList.remove("pagination__link--current"),g[c].classList.add("pagination__link--current")})},w=()=>{S.addEventListener("click",()=>{c++,b()})},F=()=>{p.addEventListener("click",()=>{c--,b()})};g.forEach((e,t)=>{e.dataset.id=t});var $=()=>{j.addEventListener("click",e=>{e.target.classList.contains("pagination__number")&&(c=+e.target.dataset.id,b())})};var z="https://echo.htmlacademy.ru",x=document.querySelector(".catalog__filter"),N=x.querySelector(".filter__button--submit"),A=x.querySelector(".filter__button--reset"),a=document.querySelector(".modal"),D=a.querySelector(".modal__text"),J=a.querySelector(".modal__button"),K=()=>{N.disabled=!0,A.disabled=!0},Q=()=>{N.disabled=!1,A.disabled=!1},W=e=>{e.target===e.currentTarget&&a.close()},X=e=>{e.preventDefault(),K();let t=new FormData(e.target),i="",u="method: GET";for(let[m,L]of t)i+=`${m}=${L}&`,u+=`, ${m}: ${L}`;i=i.slice(0,i.length-1),fetch(`${z}?${i}`).then(m=>{if(!m.ok)throw new Error;D.textContent=`\u0417\u0430\u043F\u0440\u043E\u0441 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D. \u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u0437\u0430\u043F\u0440\u043E\u0441\u0430: ${u}`}).catch(()=>{D.textContent="\u0427\u0442\u043E-\u0442\u043E \u043F\u043E\u0448\u043B\u043E \u043D\u0435 \u0442\u0430\u043A... \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437",a.showModal()}).finally(()=>{Q(),a.showModal()})},R=()=>{a.addEventListener("click",W),J.addEventListener("click",()=>{a.close()}),x.addEventListener("submit",X)};y();E();B();C();P();I();H();U();w();F();$();R();
